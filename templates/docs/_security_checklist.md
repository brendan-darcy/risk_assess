# Security Checklist for Claude Code Usage

**Purpose**: Pre-flight security verification before using Claude Code templates
**Audience**: All Apprise P&T Team members
**Compliance**: ISO 27001:2022, ISO/IEC 42001:2023, Apprise AI Usage Policy

---

## âš ï¸ Critical Security Requirements

Before starting ANY Claude Code session, you MUST complete this checklist. Failure to follow these requirements may result in:
- Exposure of sensitive client data (PII, property valuations, borrower information)
- Violation of Apprise AI Usage Policy
- Non-compliance with ISO certifications
- Potential data breach incidents

---

## Pre-Session Checklist

### â˜‘ï¸ 1. Verify .claudeignore Exists

**What**: Ensure your project has a `.claudeignore` file that prevents Claude Code from accessing sensitive files.

**How**:
```bash
# Check if .claudeignore exists in your project root
ls -la .claudeignore

# If it doesn't exist, copy the template
cp templates/pt-team/.claudeignore.template .claudeignore
```

**Minimum Required Patterns**:
```
# Sensitive data files
**/*.csv
**/data/**
**/pii/**
**/client_data/**
**/production_data/**

# Credentials and secrets
.env
.env.*
!.env.example
credentials.json
secrets.yaml
**/secret_*
**/credentials_*

# Language-specific
node_modules/
__pycache__/
*.pyc
.venv/
venv/

# Build artifacts
dist/
build/
*.log
```

**Why This Matters**:
- Claude Code can read any file in your workspace that isn't explicitly excluded
- CSV files often contain client data (valuations, borrower info, property details)
- Environment files contain API keys, database credentials, and secrets
- Without .claudeignore, this sensitive data could be sent to Claude's context window

**Risk Level**: ğŸ”´ **CRITICAL** - Without this, you risk exposing sensitive data

---

### â˜‘ï¸ 2. Confirm Dev/Sandbox Environment

**What**: Verify you're working in a development or sandbox environment, NOT production.

**How**:
```bash
# Check your current Salesforce org (if applicable)
sfdx force:org:display

# Check your AWS profile (if applicable)
aws configure list

# Check environment variables
echo $ENVIRONMENT  # Should be "dev" or "sandbox"
```

**Verify**:
- âœ… Salesforce: Developer Sandbox or UAT org
- âœ… AWS: Dev account, NOT production
- âœ… Databricks: Dev workspace, NOT production
- âœ… Database connections: Dev database, NOT production

**Why This Matters**:
- Production environments contain real client data
- Mistakes in production have immediate business impact
- Development environments use dummy data and can be safely reset
- Apprise AI Policy explicitly prohibits using production data with AI tools

**Risk Level**: ğŸ”´ **CRITICAL** - Production data exposure violates policy

---

### â˜‘ï¸ 3. Verify Using Dummy Data Only

**What**: Confirm that all data files in your workspace are dummy/synthetic data, NOT real client data.

**How**:
1. **Review data files**: Check any CSV, JSON, or database files
2. **Generate dummy data**: Use data masking template if needed
3. **Validate**: Ensure no real names, addresses, or PII present

**Acceptable Data Sources**:
- âœ… Synthetic data generated by Faker, Mockaroo, or similar tools
- âœ… Masked production data (using data_masking.md template)
- âœ… Publicly available sample datasets
- âœ… Hand-crafted test data with fictional values

**Prohibited Data Sources**:
- âŒ Production database exports
- âŒ Real client valuations or property data
- âŒ Actual borrower information (names, emails, addresses, phone numbers)
- âŒ Real API responses containing client data
- âŒ UAT data that contains real client information

**How to Generate Dummy Data**:
```python
# Use the data_masking.md template to generate:
from faker import Faker
fake = Faker()

dummy_data = {
    "borrower_name": fake.name(),
    "property_address": fake.address(),
    "email": fake.email(),
    "phone": fake.phone_number(),
    "valuation_amount": fake.random_int(300000, 1000000)
}
```

**Why This Matters**:
- Claude Code sends file context to Anthropic's servers
- Real client data in context violates privacy and confidentiality
- Apprise handles sensitive financial and personal information
- ISMS policies require protection of client data at all stages

**Risk Level**: ğŸ”´ **CRITICAL** - Client data exposure

---

### â˜‘ï¸ 4. Review Template Security Section

**What**: Before using any template, read its "Security Checklist" section.

**Why This Matters**:
- Some templates have additional security requirements
- Security controls vary by task (e.g., API integration vs. data masking)
- Understanding risks helps you make informed decisions

**Risk Level**: ğŸŸ¡ **MEDIUM** - Helps prevent security oversights

---

## During-Session Best Practices

### ğŸ” 1. Never Share Real Credentials

**DON'T**:
```javascript
// âŒ BAD: Hardcoded credential
const apiKey = "sk-prod-abc123xyz789";
```

**DO**:
```javascript
// âœ… GOOD: Use placeholder and environment variable
const apiKey = process.env.API_KEY;  // [API_KEY]
```

**Storage**:
- Salesforce: Use Named Credentials
- AWS: Use Secrets Manager or Parameter Store
- Local development: Use .env files (excluded by .claudeignore)
- Configuration: Use [PLACEHOLDER] in prompts, fill later from secure storage

---

### ğŸ§ª 2. Test with Dummy Data

**DON'T**:
```sql
-- âŒ BAD: Testing with real client data
SELECT * FROM clients WHERE email = 'john.smith@realemail.com';
```

**DO**:
```sql
-- âœ… GOOD: Testing with synthetic data
SELECT * FROM clients WHERE email = 'test.user@example.com';
```

---

### ğŸ” 3. Review All Generated Code

**Before using ANY code generated by Claude**:
- âœ… Read through every line
- âœ… Check for security vulnerabilities (SQL injection, XSS, etc.)
- âœ… Verify no hardcoded secrets
- âœ… Ensure error handling doesn't expose sensitive info
- âœ… Validate input validation is present
- âœ… Confirm test coverage is adequate

**Why**: AI-generated code may have subtle security flaws that aren't immediately obvious.

---

### ğŸ“ 4. Sanitize Prompts

**DON'T**:
```
"Create a function to query our production database at
db.prod.apprise.internal with username admin and password P@ssw0rd123"
```

**DO**:
```
"Create a function to query [DB_HOST] using credentials from
environment variables DB_USER and DB_PASSWORD"
```

**If you accidentally share sensitive data**:
1. Immediately delete the chat
2. Rotate compromised credentials
3. Report incident to InfoSec team

---

## Post-Session Requirements

### ğŸ—‘ï¸ 1. Delete Chat History (MANDATORY)

**Apprise AI Policy Requirement**: "Team members are required to regularly delete chat histories and AI conversation logs to minimize data retention risks and protect sensitive information."

**How to Delete**:
1. In Claude Code, click the chat history icon (top right)
2. Find your conversation
3. Click the delete icon (trash can)
4. Confirm deletion

**Frequency**:
- **Daily**: For active development sessions
- **Immediately**: If any sensitive data was accidentally shared
- **Weekly**: Minimum for all users

**Why This Matters**:
- Reduces data retention window
- Minimizes risk of data exposure
- Complies with Apprise AI Usage Policy
- Aligns with ISMS data retention policies

**Risk Level**: ğŸ”´ **CRITICAL** - Policy requirement

---

### ğŸ” 2. Review Created Files

**Before committing code**:
```bash
# Check for accidentally created sensitive files
git status

# Review file contents for sensitive data
grep -r "password\|secret\|api_key" .

# Use secrets detection template if needed
# (See security/secrets_detection.md)
```

**Common Issues**:
- Accidentally generated files with test data that looks too real
- Debug logs containing sensitive information
- Configuration files with hardcoded values

---

### âœ… 3. Verify .claudeignore Worked

**Check that Claude didn't access sensitive files**:
```bash
# Review your .claudeignore patterns
cat .claudeignore

# Check for any CSV or data files
find . -name "*.csv" -o -name "*.env"

# These should all be excluded by .claudeignore
```

**If Claude accessed a sensitive file**:
1. Immediately delete the chat
2. Review what data was exposed
3. Update .claudeignore patterns
4. Report to InfoSec if real client data was involved

---

## Emergency Procedures

### ğŸš¨ If You Accidentally Share Sensitive Data

1. **Immediate Actions**:
   - Delete the Claude Code chat immediately
   - Screenshot the conversation if needed for incident report
   - Note exactly what data was shared

2. **Assess Impact**:
   - Was it real client data or dummy data?
   - Did it contain PII, credentials, or proprietary information?
   - How sensitive was the information?

3. **Report**:
   - **High Severity** (real client PII, credentials): Report to InfoSec team immediately
   - **Medium Severity** (internal technical info): Report to Lead Engineer
   - **Low Severity** (dummy data, public info): Note for process improvement

4. **Remediate**:
   - Rotate any exposed credentials
   - Update .claudeignore to prevent recurrence
   - Review and improve personal practices

---

## Compliance Summary

### ISO 27001:2022
- **Clause 9**: Access Control (environment verification)
- **Clause 10**: Cryptography (secrets management)
- **Clause 13**: Communications Security (.claudeignore, chat deletion)
- **Clause 14**: System Acquisition (secure development practices)

### ISO/IEC 42001:2023 (AI Management)
- **Transparency**: Clear documentation of AI tool usage
- **Accountability**: Human review of all AI-generated code
- **Risk Management**: Pre-flight checklists mitigate AI risks
- **Data Governance**: Dummy data policies protect client information

### Apprise ISMS Policies
- **ISMS 3**: Information Classification & Handling
- **ISMS 4**: Access Control & Password Policy
- **ISMS 7**: Acceptable Use Policy
- **ISMS 16**: Data Retention
- **SEH**: Software Engineering Handbook standards

### Apprise AI Usage Policy
- Approved tool: Claude Code âœ…
- Regular chat history deletion âœ…
- No production data with AI tools âœ…
- Secure coding practices maintained âœ…

---

## Quick Reference Card

**Print this and keep at your desk:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLAUDE CODE SECURITY CHECKLIST - QUICK REF   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  BEFORE SESSION:                                â”‚
â”‚  â˜ .claudeignore exists                        â”‚
â”‚  â˜ Dev/Sandbox environment                     â”‚
â”‚  â˜ Dummy data only                             â”‚
â”‚  â˜ Read template security section              â”‚
â”‚                                                 â”‚
â”‚  DURING SESSION:                                â”‚
â”‚  â˜ No real credentials in prompts              â”‚
â”‚  â˜ Use [PLACEHOLDERS] for secrets              â”‚
â”‚  â˜ Review all generated code                   â”‚
â”‚  â˜ Test with dummy data                        â”‚
â”‚                                                 â”‚
â”‚  AFTER SESSION:                                 â”‚
â”‚  â˜ Delete chat history (MANDATORY)             â”‚
â”‚  â˜ Review created files                        â”‚
â”‚  â˜ Verify .claudeignore worked                 â”‚
â”‚                                                 â”‚
â”‚  IF DATA EXPOSED:                               â”‚
â”‚  1. Delete chat immediately                     â”‚
â”‚  2. Assess severity                             â”‚
â”‚  3. Report (InfoSec for PII/credentials)        â”‚
â”‚  4. Rotate exposed credentials                  â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Additional Resources

- **Data Masking Template**: `/templates/pt-team/security/data_masking.md`
- **Secrets Detection Template**: `/templates/pt-team/security/secrets_detection.md`
- **Apprise AI Usage Policy**: `/docs - raw/ai_policy_rough_sketch.txt`
- **Product & Tech Handbook**: `/docs - raw/Product and Tech Handbook (October 2025).md`
- **ISMS Policies**: Contact InfoSec team or see Employee Handbook

---

**Version**: 1.0
**Last Updated**: October 2025
**Review Cycle**: Quarterly
**Owner**: P&T Team / InfoSec Team
